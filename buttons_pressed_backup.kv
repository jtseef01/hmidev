#:kivy 1.7.2
#:import KivyLexer kivy.extras.highlight.KivyLexer
#:import Factory kivy.factory.Factory

<CustomLayout>:
	canvas.before:
		Color: 
			rgba: .251, .251, .251, 1
		Rectangle:
			pos: self.pos
			size: self.size
		
<Dashboard>:
	box_l: boxID
	BoxLayout:
		canvas.before:
			Color:
				rgba: .5, 0, 0, 1
			Rectangle: 
				pos: self.pos
				size: self.size
		orientation: 'horizontal'
		grid_l: home_grid
		id: boxID
    	CustomLayout:
    		id: home_grid
    		btn: close_door_id
    		btn: open_door_id
    		btn: loosen_servo_id
    		btn: grip_servo_id
    		btn: reset_id
    		btn: play_id
    		btn: motor_goto_id
    		btn: exit_id
    		#####################
        	cols: 2
        	padding: 20, 20
        	spacing: 30, 20
        	
        	#######################
        	Button:
            	id: close_door_id
            	text: 'Close Door'
            	on_press: root.search_btn_pressed(self)
            Button:
            	id: open_door_id
            	text: 'Open Door'
            	on_press: root.search_btn_pressed(self)
            Button:
            	id: loosen_servo_id
            	text: 'Servo Loosen'
            	on_press: root.search_btn_pressed(self)
            Button:
            	id: grip_servo_id
            	text: 'Servo Grip'
            	on_press: root.search_btn_pressed(self)
            Button:
            	id: reset_id
            	text: 'Reset'
            	on_press: root.search_btn_pressed(self)
            Button:
            	id: play_id
            	text: 'Play'
            	on_press: root.search_btn_pressed(self)
        	Button: 
        		id: motor_goto_id
        		text: 'Motor Goto' 
        		on_press: root.manager.current = 'gotomotor'
        	Button:
            	id: exit_id
            	text: 'Exit'
            	on_press: root.search_btn_pressed(self)
        BoxLayout:
        	orientation: 'vertical'
        	pos_hint: {'x' : 0, 'y' : .8}
        	label1: status_title
        	size_hint: .8, None
        	Label:
        		id: status_title
        		text: 'Status'
        		bold: True
        		font_size: '18sp'
        	GridLayout:
        		id: status_grid
        		label: state
				label: state_val
				label: door
        		label: door_val
        		label: base_potent
        		label: base_potent_val
        		label: wrist_potent
        		label: wrist_potent_val
        		label: tele_potent
        		label: tele_potent_val
        		label: ignitor_potent
        		label: ignitor_potent_val
        		label: vas_potent
        		label: vas_potent_val
        	
				cols: 2
				size_hint: .8, .9
				pos_hint: {'x' : .1, 'y' : .9}
				padding: 20, 20
        		spacing: 20, 1
        		row_default_height: '50dp'
        		row_force_default: True
        		Label:
        			id: state
        			text: 'State'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: state_val
        			text: 'Paused'
        		Label:
        			id: door
        			text: 'Door:'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: door_val
        			text: 'Open'
        		Label:
        			id: base_potent
        			text: 'Base Potentiometer:'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: base_potent_val
        			text: '0'
        		Label:
        			id: wrist_potent
        			text: 'Wrist Potentiometer:'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: wrist_potent_val
        			text: '0'
        		Label:
        			id: tele_potent
        			text: 'Telescopic Potentiometer:'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: tele_potent_val
        			text: '0'
        		Label:
        			id: ignitor_potent
        			text: 'Ignitor Potentiometer:'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: ignitor_potent_val
        			text: '0'
        		Label:
        			id: vas_potent
        			text: 'VAS Potentiometer:'
        			bold: True
        			size_hint: .9, None
        		Label:
        			id: vas_potent_val
        			text: '0'

<MotorGotoScreen>:
	canvas.before:
		Color: 
			rgba: .251, .251, .251, 1
		Rectangle:
			pos: self.pos
			size: self.size
	big_box_l: big_box_ID
	BoxLayout:
		canvas.before:
			Color: 
				rgba: .251, .251, .251, 1
		small_box_l: small_box_id
		title_label: title_id
		value_label: value_id
		id: big_box_ID
		orientation: 'vertical'
		Label: 
			id: title_id
			font_size: '25sp'
			text: 'Motor Goto'
			bold: True
		BoxLayout:
			id: button_box_id
			size_hint: .8, .8
			pos_hint: {'x': .1}
			orientation: 'horizontal'
			button: wrist_btn
			button: telescopic_btn
			button: base_btn
			button: ignitor_btn
			button: vas_btn
			ToggleButton:
				id: wrist_btn
				text: 'Wrist'
				group: 'buttons'
			ToggleButton:
				id: telescopic_btn
				text: 'Telescopic'
				group: 'buttons'
			ToggleButton:
				id: base_btn
				text: 'Base'
				group: 'buttons'
			ToggleButton:
				id: ignitor_btn
				text: 'Ignitor'
				group: 'buttons'
			ToggleButton:
				id: vas_btn
				text: 'VAS'
				group: 'buttons'
		Label:
			id: value_id
			text: str(int(slider_id.value))
			font_size: '18sp'
		BoxLayout:
			size_hint: .8, 1
			pos_hint: {'x': .1}
			id: small_box_id
			orientation: 'horizontal'
			increment_btn: increment_btn_id
			decrement_btn: decrement_btn_id
			slider: slider_id
			Button:
				id: decrement_btn_id
				text: '<<'
				bold: True
				size_hint: .4, .4
				pos_hint: {'x': 1, 'y': 1}
				on_press: root.search_btn_pressed(self)
			Slider:
				id: slider_id
				orientation: 'horizontal'
				min: 0
				max: 1024
				value: 512
				step: 1
				pos_hint: {'y': .7}
			Button:
				id: increment_btn_id
				text: '>>'
				bold: True
				size_hint: .4, .4
				pos_hint: {'x': 1, 'y': 1}
				on_press: root.search_btn_pressed(self)
		BoxLayout:
            return_btn: return_btn_id
			submit_btn: submit_btn_id			
			Button:
				id: return_btn_id
				text: 'Return'
				size_hint: 1, .4
                background_color: (1.0, 0.0, 0.0, 1.0)
				on_press: root.manager.current = 'dash'
			Button:
				id: submit_btn_id
				text: 'Submit Command'
				size_hint: 1, .4
                background_color: (0.0, 1.0, 0.0, 1.0)
				on_press: root.search_btn_pressed(self)
	

<TestScreen>:
	Button: 
		text: 'Power Saver' 
        on_press: root.manager.current = 'dash'       		
        		
        		
        		
